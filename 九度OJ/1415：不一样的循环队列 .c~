#include <stdio.h>
#include <string.h>

int main()
{
	int n, m;
	int front, rear, cnt;
	int k;
	char str[100];
	int arr[100005];

	while(scanf("%d %d", &n, &m) != EOF)
	{
		front = rear = 0;
		cnt = 0;
		while(n--)
		{
			scanf("%s", str);
		//	cout << "fda" << str << endl;
			if (strcmp(str, "Push") == 0)
			{
				scanf("%d", &k);
				if (cnt == m)
					printf("failed\n");
				else
				{
					arr[rear] = k;
					rear = (rear + 1) % m;
					cnt++;
				}
			}
			else if (strcmp(str, "Pop") == 0)
			{
				if (cnt == 0)
					printf("failed\n");
				else
				{
					front = (front + 1) % m;
					cnt--;
				}
			}
			else if (strcmp(str, "Query") == 0)
			{
				scanf("%d", &k);
				if (cnt < k || k <= 0)
					printf("failed\n");
				else
					printf("%d\n", arr[(front + k - 1) % m]);
			}
			else if (strcmp(str, "Isempty") == 0)
			{
				if (cnt == 0)
					printf("yes\n");
				else
					printf("no\n");
			}
			else if (strcmp(str, "Isfull") == 0)
			{
				if (cnt == m)
					printf("yes\n");
				else
					printf("no\n");
			}
		}
	}
	return 0;
}
