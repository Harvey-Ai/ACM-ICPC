#include <iostream>
#include <cstdio>
#include <cstring>
using namespace std;

int main()
{
	int k, i, j, t;
	int n;
	char str[205];
	char temp[205], temp2[205];
	int key[205], flag[205];
	int len;
	int pos;

	while(cin >> n, n != 0)
	{
		for(i = 0;i < n;i++)
		{
			scanf("%d", &key[i]);
			key[i]--;
		}
		while(cin >> k, k != 0)
		{
			getchar();
			cin.getline(str, 1000, '\n');
			len = strlen(str);
			if (len < n)
			{
				for(i = len;i < n;i++)
					str[i] = ' ';
				str[n] = '\0';
			}

			memset(flag, 0, sizeof(flag));
			for(i = 0;i < n;i++)
			{
				if (flag[i])
					continue;
				pos = i;
				int c = 0;
				while(!flag[pos])
				{
					c++;
					flag[pos] = 1;
					pos = key[pos];
				}
				int realcicle = k % c;
				temp[0] = str[i];
				pos = key[i];
				j = 1;
				while(pos != i)
				{
					temp[j++] = str[pos];
					pos = key[pos];
				}
				for(j = 0;j < c;j++)
				{
					for(t = 0;t < realcicle;t++)
						temp2[t] = temp[t - realcicle + c];
					for(t = realcicle;t < c;t++)
						temp2[t] = temp[t - realcicle];
				}
				pos = i;
				for(j = 0;j < c;j++)
				{
					str[pos] = temp2[j];
					pos = key[pos];
				}
			}
			cout << str << endl;
		}
		cout << endl;
	}
	return 0;
}
